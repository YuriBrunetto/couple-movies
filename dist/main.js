$(function(){$(window).load(function(){$("body").removeClass("opacity")}),$(".menu").click(function(){$("#menu-open").toggleClass("active"),$("#menu-close").toggleClass("active")})}),$(function(){var t,e=$(window);e.load(function(){window.localStorage&&i.LoadMovies()});(function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}})();$("#form").on("submit",function(t){t.preventDefault();var e=$(this).serialize(),i="http://www.omdbapi.com/?"+e,o="";$.ajax({type:"GET",dataType:"json",url:i,success:function(t){var e={title:t.Title,year:t.Year,director:t.Director,genre:t.Genre,description:t.Plot,poster:t.Poster};void 0!=e.title&&(o+='<div class="tips">',o+='<img src="'+e.poster+'" alt="'+e.title+'" class="tips-poster">',o+='<div class="tips-description">',o+='<h3><strong data-movie="title">'+e.title+'</strong> <span data-movie="year">'+e.year+"</span></h3><br>",o+='<p data-movie="director"><strong>Director:</strong> '+e.director+"</p>",o+='<p data-movie="genre"><strong>Genre:</strong> '+e.genre+"</p>",o+='<p data-movie="description"><strong>Short description:</strong> '+e.description+"</p>",o+="</div>",o+='<a href="javascript:;" class="tips-add">add to list <i class="fa fa-check" aria-hidden="true"></i></a>',o+="</div>",$("#results").html(o))}})}),$("#form").on("keyup","#t",function(){$(this).submit()});var i={};i.SaveTo="CoupleMovies44",$("body").delegate(".tips-add","click",function(){t=$(this).parent().find(".tips-description");var e={title:t.find("strong[data-movie='title']").text(),year:t.find("span[data-movie='year']").text(),director:t.find("p[data-movie='director']").text().replace("Director: ",""),genre:t.find("p[data-movie='genre']").text().replace("Genre: ",""),description:t.find("p[data-movie='description']").text().replace("Short description: ",""),poster:$(this).parent().find("img").attr("src")};i.SaveMovie(i.SaveTo,e)}),i.SaveMovie=function(t,e){for(var o=localStorage.getItem(t)||"[]",r=JSON.parse(o)||[],a=r.concat(e),s=a.length-1,n=!1,c=0;c<r.length;c++)a[s].title==r[c].title&&(n=!0);n?console.log("already exists"):(window.localStorage.setItem(t,JSON.stringify(a)),i.LoadMovies(),$(".notification").addClass("active"),setTimeout(function(){$(".notification").removeClass("active")},3e3))},i.LoadMovies=function(){var t,e,o=window.localStorage.getItem(i.SaveTo);if(o){e=JSON.parse(o);for(var r in e){var a=e[r];t+='<div class="tips">',t+='<img src="'+a.poster+'" alt="'+a.title+'" class="tips-poster">',t+='<div class="tips-description">',t+='<h3><strong data-movie="title">'+a.title+'</strong> <span data-movie="year">'+a.year+"</span></h3><br>",t+='<p data-movie="director"><strong>Director:</strong> '+a.director+"</p>",t+='<p data-movie="genre"><strong>Genre:</strong> '+a.genre+"</p>",t+='<p data-movie="description"><strong>Short description:</strong> '+a.description+"</p>",t+="</div>",t+='<a href="javascript:;" class="tips-remove">remove</a>',t+="</div>"}t=t.replace("undefined",""),$("#my-list").html(t)}else console.log("n√£o")}});