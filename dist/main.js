$(function(){$(window).load(function(){$("body").removeClass("opacity")}),$(".menu").click(function(){$("#menu-open").toggleClass("active"),$("#menu-close").toggleClass("active")});var e="CoupleMoviesTips125",t=window.localStorage.getItem(e);t?$(".tips-container").remove():$("#close-tips").click(function(){$(".tips-container").css("opacity",0),$(".tips-container").one("webkitTransitionEnd mozTransitionEnd MSTransitionEnd oatransitionend transitionend",function(){$(".tips-container").hide("slow",function(){$(".tips-container").remove()})});var t=!0;window.localStorage.setItem(e,t)}),$("#scroll").click(function(){$("html, body").animate({scrollTop:$(".main").offset().top},400)})}),$(function(){var e,t=$(window);t.load(function(){window.localStorage&&i.LoadMovies()});(function(){var e=0;return function(t,i){clearTimeout(e),e=setTimeout(t,i)}})();$("#form").on("submit",function(e){e.preventDefault();var t=$(this).serialize(),i="https://www.omdbapi.com/?"+t,o="";$.ajax({type:"GET",dataType:"json",url:i,success:function(e){var t={title:e.Title,year:e.Year,director:e.Director,genre:e.Genre,poster:e.Poster};void 0!=t.title&&(o+='<div class="tips">',o+='<img src="'+t.poster+'" alt="'+t.title+'" class="tips-poster">',o+='<div class="tips-description">',o+='<h3><strong data-movie="title">'+t.title+'</strong> <span data-movie="year">'+t.year+"</span></h3><br>",o+='<p data-movie="director"><strong>Director:</strong> '+t.director+"</p>",o+='<p data-movie="genre"><strong>Genre:</strong> '+t.genre+"</p>",o+="</div>",o+='<a href="javascript:;" class="tips-add">add to list <i class="fa fa-check" aria-hidden="true"></i></a>',o+="</div>",$("#results").html(o))}})}),$("#form").on("keyup","#t",function(){$(this).submit()});var i={};i.SaveTo="CoupleMovies77",$("body").delegate(".tips-add","click",function(){e=$(this).parent().find(".tips-description");var t={title:e.find("strong[data-movie='title']").text(),year:e.find("span[data-movie='year']").text(),director:e.find("p[data-movie='director']").text().replace("Director: ",""),genre:e.find("p[data-movie='genre']").text().replace("Genre: ",""),poster:$(this).parent().find("img").attr("src")};i.SaveMovie(i.SaveTo,t)}),$("body").delegate(".tips-remove","click",function(){e=$(this).parent(),i.DeleteMovie(e)}),i.SaveMovie=function(e,t){for(var o=localStorage.getItem(e)||"[]",a=JSON.parse(o)||[],n=a.concat(t),s=n.length-1,r=!1,c=0;c<a.length;c++)n[s].title==a[c].title&&(r=!0);r?($("#notification-exists").addClass("active"),setTimeout(function(){$("#notification-exists").removeClass("active")},3e3)):(window.localStorage.setItem(e,JSON.stringify(n)),i.LoadMovies(),$("#notification-added").addClass("active"),setTimeout(function(){$("#notification-added").removeClass("active")},3e3))},i.LoadMovies=function(){var e,t,o=window.localStorage.getItem(i.SaveTo);if(o)if(t=JSON.parse(o),t.length>=1){for(var a in t){var n=t[a];e+='<div class="tips">',e+='<img src="'+n.poster+'" alt="'+n.title+'" class="tips-poster">',e+='<div class="tips-description">',e+='<h3><strong data-movie="title">'+n.title+'</strong> <span data-movie="year">'+n.year+"</span></h3><br>",e+='<p data-movie="director"><strong>Director:</strong> '+n.director+"</p>",e+='<p data-movie="genre"><strong>Genre:</strong> '+n.genre+"</p>",e+="</div>",e+='<a href="javascript:;" class="tips-remove">remove</a>',e+="</div>"}e=e.replace("undefined",""),$("#my-list").html(e)}else $("#my-list").html("<p class='no-movies'>There are no movies on your list.</p>");else $("#my-list").html("<p class='no-movies'>There are no movies on your list.</p>")},i.DeleteMovie=function(e){var t=e.find("strong[data-movie='title']").text(),o=JSON.parse(localStorage.getItem(i.SaveTo)),a=$.grep(o,function(e){return e.title!==t});window.localStorage.setItem(i.SaveTo,JSON.stringify(a)),setTimeout(function(){i.LoadMovies(),$("#notification-del").addClass("active"),setTimeout(function(){$("#notification-del").removeClass("active")},3e3)},1e3)}});